<!DOCTYPE html>
<html>
<head>
    <title>Travel Search Results</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        .search-info {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .search-info p {
            margin: 5px 0;
        }
        .error {
            background-color: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #c62828;
        }
        .no-results {
            text-align: center;
            padding: 40px;
            color: #888;
        }
        .path {
            background-color: #f5f5f5;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        .path-header {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 15px;
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .back-button {
            display: inline-block;
            background-color: #2196F3;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 4px;
            margin-top: 20px;
        }
        .back-button:hover {
            background-color: #0b7dda;
        }
        .execution-time {
            color: #4CAF50;
            font-weight: bold;
        }
    </style>
    <link rel="icon" type="image/x-icon" href="/assets/img/chair.png">
    <script src="/assets/js/main.js"></script>
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css"/>
</head>
<body>
    <div class="container">
        <h1>Travel Search Results</h1>

        {{ if .data.Error }}
        <div class="error">
            <strong>Error:</strong> {{ .data.Error }}
        </div>
        {{ else }}
        <div class="search-info">
            <p><strong>Strategy:</strong> {{ .data.Strategy }}</p>
            <p><strong>Database:</strong> {{ .data.Database }}</p>
            <p><strong>Source:</strong> {{ .data.SourceDisplay }}</p>
            <p><strong>Destination:</strong> {{ .data.DestinationDisplay }}</p>
            <p><strong>Arrival Window:</strong> {{ .data.ArrivalFrom }} to {{ .data.ArrivalTo }}</p>
            <p><strong>Max Transfers:</strong> {{ .data.TravelCount }}</p>
            <p><strong>Max Connection Time:</strong> {{ .data.MaxConnectionTime }} hours</p>
            <p><strong>Min Connection Time:</strong> {{ .data.MinConnectionTime }} minutes</p>
            <p class="execution-time"><strong>Execution Time:</strong> {{ .data.ExecutionTime }}</p>
        </div>

        {{ if .data.Paths }}
        <h2>Found {{ len .data.Paths }} Path(s)</h2>

        {{ range $index, $path := .data.Paths }}
        <div class="path">
            <div class="path-header">
                Path {{ add $index 1 }} - {{ $path.TransferCount }} Transfer(s) - Total Duration: {{ $path.TotalDuration }}
            </div>
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>From</th>
                        <th>To</th>
                        <th>Departure</th>
                        <th>Arrival</th>
                        <th>Duration</th>
                    </tr>
                </thead>
                <tbody>
                    {{ range $i, $transfer := $path.Transfers }}
                    <tr>
                        <td>{{ add $i 1 }}</td>
                        <td>{{ $transfer.From }}</td>
                        <td>{{ $transfer.To }}</td>
                        <td>{{ $transfer.Departure }}</td>
                        <td>{{ $transfer.Arrival }}</td>
                        <td>{{ $transfer.Duration }}</td>
                    </tr>
                    {{ end }}
                </tbody>
            </table>
        </div>
        {{ end }}

        {{ else }}
        <div class="no-results">
            <h2>No paths found</h2>
            <p>Try adjusting your search criteria.</p>
        </div>
        {{ end }}

        <a href="/travel/search?strategy={{ .data.Strategy }}&database={{ .data.Database }}&source={{ .data.Source }}&destination={{ .data.Destination }}&arrival_from={{ .data.ArrivalFrom }}&arrival_to={{ .data.ArrivalTo }}&travel_count={{ .data.TravelCount }}&max_connection_time={{ .data.MaxConnectionTime }}&min_connection_time={{ .data.MinConnectionTime }}" class="back-button">‚Üê New Search</a>
        {{ end }}
    </div>
</body>
</html>
